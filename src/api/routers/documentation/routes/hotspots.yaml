/hotspots:
  get:
    description: Retourne soit tout les hotspots étant dans le rectangle décrit par les coordonées gps, soit tout les hotspots associés a la ville identifié par le slug, soit 401 si la requète est mal formée.
    tags:
      - Hotspots
    parameters:
    - name: Authorization
      in: header
      required: true
      schema:
        type: string
    - name: slug
      in: query
      description: Le slug de la commune attachée au hotspot.
      required: false
      schema:
          type: string
    - name: north
      in: query
      description: La latitude nord du rectangle de sélection.
      required: false
      schema:
          type: float
    - name: west
      in: query
      description: La longitude ouest du rectangle de sélection.
      required: false
      schema:
          type: float
    - name: south
      in: query
      description: La latitude sud du rectangle de sélection.
      required: false
      schema:
          type: float
    - name: east
      in: query
      description: La longitude est du rectangle de sélection.
      required: false
      schema:
          type: float
    produces:
      - application/json
    responses:
      200:
        description: Une liste de hotspots.
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/definitions/Hotspots'
      401:
        description: Requète mal formée.
  post:
    description: Créé un hotspot en fonction des parametres envoyés, retourne celui ci ou une erreur 401 si la requète est mal formé, ou encore une erreur 501 si une erreur interne est survenue.
    tags:
      - Hotspots
    parameters:
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
      - in: body
        description: Le hotspot à créer.
        name: hotspot
        schema:
          type: object
          required:
            - position
            - title
          properties:
            cityId:
              type: string
            position:
              type: object
              properties:
                latitude:
                  type: number
                  format: float
                longitude:
                  type: number
                  format: float
            address:
              type: object
              properties:
                city:
                  type: string
                name:
                  type: string
            type:
              type: string
              enum: [WallMessage, Event, Alert]
            iconType:
              type: string
              enum: [WallIcon, EventIcon, AccidentIcon, DeteriorationIcon]
            title:
              type: An hotspot title
            scope:
              type: string
              enum: [public, private]
            dateEnd:
              type: string
            description:
              type: string
            message:
              type: string
          example:
            - cityId: "33273"
              position:
                latitude: 22.12342
                longitude: -1.12312
              address:
                city: Martignas sur Jalles
                name: 12 place de l'Eglise
              type: WallMessage
              iconType: WallIcon
              title: Ecole Flora Tristan
              scope: public
            - cityId: "33273"
              position:
                latitude: 22.12342
                longitude: -1.12312
              address:
                city: Martignas sur Jalles
                name: 12 place de l'Eglise
              type: Event
              iconType: EventIcon
              title: Les 10km du moulin Bidon
              scope: private
              dateEnd: 2017-12-15T07:39:15.490Z
              description: Les dossards sont à retirer la veille. La course commence à 9h00
            - cityId: "33273"
              position:
                latitude: 22.12342
                longitude: -1.12312
              address:
                city: Martignas sur Jalles
                name: 3 route de Saint Jean d'Illac
              type: Alert
              iconType: AccidentIcon
              message: Accident entre une voiture et un scooter pompier sur place.
    produces:
      - application/json
    responses:
      201:
        description: Le hotspot nouvellement créé.
        content:
          application/json:
            schema:
              type: object
              $ref: '#/definitions/Hotspots'
      401:
        description: Hotspot invalide.
      500:
        description: Quelque chose a mal tourné.
/hotspots/{hotspotId}:
  patch:
    description: Il faut choisir une des trois options, la structure doit correspondre exactement a seulement une option. Retourne 200 et l'hotspot édité si tout s'est bien passé, 400 si la requète est mal formé, 401 si le body est invalide et 500 si une erreur interne s'est produite.
    tags:
      - Hotspots
    parameters:
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
      - name: hotspotId
        in: path
        description: L'uuid de l'hotspot.
        required: true
        type: string
      - in: body
        name: hotspot
        description: Les propriétées de l'hotspots.
        schema:
          type: object
          required:
            - position
            - title
          properties:
            title:
              type: string
            scope:
              type: string
              enum: [public, private]
            dateEnd:
              type: string
            description:
              type: string
            message:
              type: string
          example:
            - title: Ecole Flora Tristan
              scope: public
            - title: Les 10km du moulin Bidon de la Jalles
              scope: public
              dateEnd: 2017-12-15T14:55:12.754Z
              description: Les dossards sont à retirer la veille. La course commence à 9h00.
            - message: Les pompiers sont partis, la DDE retire les débrits.
    produces:
      - application/json
    responses:
      200:
        description: L'hotspot correctement edité.
        content:
          application/json:
            schema:
              type: object
              $ref: '#/definitions/Hotspots'
      400:
        description: Requète mal formé, verifier le body envoyé.
      401:
        description: Body invalide, verifiez votre requète.
      500:
        description: Quelque chose a mal tourné :(.
  delete:
    description: Supprime un hotspot. Retourne 200 si tout s'est bien passé, 404 si l'uuid est invalide, 401 si le jeton jwt l'est et 500 si une erreur interne s'est produite.
    tags:
      - Hotspots
    parameters:
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
      - name: hotspotId
        in: path
        description: L'uuid de l'hotspot à supprimer
        required: true
        type: string
    produces:
      - application/json
    responses:
      200:
        description: L'hotspot n'est plus de ce monde :(.
      404:
        description: HotpotId invalide.
      401:
        description: Jeton d'authentification invalide.
      500:
        description: Quelque chose à mal tourné.
/hotspots/{hotspotId}/views:
  post:
    description: Ajoute une vue a un hotspot. Retourne 200 si tout s'est bien passé, 404 si l'hotspot ne peut pas etre trouvé.
    tags:
      - Hotspots
    parameters:
    - name: Authorization
      in: header
      required: true
      schema:
        type: string
    - name: hotspotId
      in: path
      description: L'uuid de l'hotspot à voir.
      required: true
      type: string
    produces:
      - application/json
    responses:
      200:
        description: La vue a bien était ajoutée au hotspot.
      404:
        description: L'hotspot est introuvable.
