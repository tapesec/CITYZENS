/hotspots:
  get:
    tags:
      - Hotspots
    parameters:
    - name: Authorization
      in: header
      required: true
      schema:
        type: string
    - name: insee
      in: query
      description: the code insee commune
      required: false
      schema:
          type: string
    - name: north
      in: query
      description: the latitude north of the area
      required: false
      schema:
          type: float
    - name: west
      in: query
      description: the longitude west of the area
      required: false
      schema:
          type: float
    - name: south
      in: query
      description: the latitude south of the area
      required: false
      schema:
          type: float
    - name: east
      in: query
      description: the longitude east of the area
      required: false
      schema:
          type: float
    description: Returns all hotspots
    produces:
      - application/json
    responses:
      200:
        description: An array of cityzens's hotspots
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/definitions/Hotspots'
      401:
        description: Invalid query strings
  post:
    tags:
      - Hotspots
    parameters:
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
      - in: body
        name: hotspot
        description: The hotspot to create.
        schema:
          type: object
          required:
            - position
            - title
          properties:
            cityId:
              type: string
            position:
              type: object
              properties:
                latitude:
                  type: number
                  format: float
                longitude:
                  type: number
                  format: float
            address:
              type: object
              properties:
                city:
                  type: string
                name:
                  type: string
            type:
              type: string
              enum: [WallMessage, Event, Alert]
            iconType:
              type: string
              enum: [WallIcon, EventIcon, AccidentIcon, DeteriorationIcon]
            title:
              type: An hotspot title
            scope:
              type: string
              enum: [public, private]
            dateEnd:
              type: string
            description:
              type: string
            message:
              type: string
          example:
            WallHotspot:
              cityId: "33273"
              position:
                latitude: 22.12342
                longitude: -1.12312
              address:
                city: Martignas sur Jalles
                name: 12 place de l'Eglise
              type: WallMessage
              iconType: WallIcon
              title: Ecole Flora Tristan
              scope: public
            EventHotspot:
              cityId: "33273"
              position:
                latitude: 22.12342
                longitude: -1.12312
              address:
                city: Martignas sur Jalles
                name: 12 place de l'Eglise
              type: Event
              iconType: EventIcon
              title: Les 10km du moulin Bidon
              scope: private
              dateEnd: 2017-12-15T07:39:15.490Z
              description: Les dossards sont à retirer la veille. La course commence à 9h00
            AlertHotspot:
              cityId: "33273"
              position:
                latitude: 22.12342
                longitude: -1.12312
              address:
                city: Martignas sur Jalles
                name: 3 route de Saint Jean d'Illac
              type: Alert
              iconType: AccidentIcon
              message: Accident entre une voiture et un scooter pompier sur place.
    description: Create an hotspot and return the new one
    produces:
      - application/json
    responses:
      201:
        description: The new created hotspot
        content:
          application/json:
            schema:
              type: object
              $ref: '#/definitions/Hotspots'
      401:
        description: Invalid body
      500:
        description: something went wrong
/hotspots/{hotspotId}:
  patch:
    tags:
      - Hotspots
    parameters:
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
      - name: hotspotId
        in: path
        description: an hotspot identification (uuid)
        required: true
        type: string
      - in: body
        name: hotspot
        description: hotspot properties to edit.
        schema:
          type: object
          required:
            - position
            - title
          properties:
            title:
              type: string
            scope:
              type: string
              enum: [public, private]
            dateEnd:
              type: string
            description:
              type: string
            message:
              type: string
          example:
            WallHotspot:
              title: Ecole Flora Tristan
              scope: public
            EventHotspot:
              title: Les 10km du moulin Bidon de la Jalles
              scope: public
              dateEnd: 2017-12-15T14:55:12.754Z
              description: Les dossards sont à retirer la veille. La course commence à 9h00
            AlertHotspot:
              message: Les pompiers sont partis, la DDE retire les débrits.
    description: Choisir entre les options d'un des 3 types d'hotspots, ne pas passer le type d'hotspot à éditer
    produces:
      - application/json
    responses:
      200:
        description: L'hotspot edité
        content:
          application/json:
            schema:
              type: object
              $ref: '#/definitions/Hotspots'
      400:
        description: bad request, verifier le body envoyé
      401:
        description: Invalid body
      500:
        description: something went wrong
  delete:
    tags:
      - Hotspots
    parameters:
      - name: Authorization
        in: header
        required: true
        schema:
          type: string
      - name: hotspotId
        in: path
        description: an hotspot identification (uuid)
        required: true
        type: string
    description: delete an hotspot
    produces:
      - application/json
    responses:
      200:
        description: ok, hotspot was successfully removed
      404:
        description: invalid hotspotId
      401:
        description: Invalid token
      500:
        description: something went wrong
/hotspots/{hotspotId}/views:
  post:
    tags:
      - Hotspots
    parameters:
    - name: Authorization
      in: header
      required: true
      schema:
        type: string
    - name: hotspotId
      in: path
      description: an hotspot identification (uuid)
      required: true
      type: string
    description: Add an extra view
    produces:
      - application/json
    responses:
      200:
        description: Ok, view added
      404:
        description: The hotspot is not found
